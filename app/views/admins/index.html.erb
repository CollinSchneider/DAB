<h1> <%= current_user.email %> Admin Page </h1>
<%= link_to "Product Page", products_path %>

<h3> Users: </h3>
<% if @users.length === 0 %>
  <h6>No users have signed-up!</h6>
<% else %>
  <% @users.each do |user| %>
    <h5><%= user.name || user.email %></h5>
    <%= button_to "X", user_path(user.id), method: :delete %>
  <% end %>
<% end %>

<h3> Affiliates: </h3>
<% if @affiliates.length === 0 %>
  <h6> No affiliates have signed-up!</h6>
<% else %>
  <% @affiliates.each do |affiliate| %>
    <h5> <%= affiliate.email %> </h5>
    <%= button_to "X", user_path(affiliate.id), method: :delete %>
  <% end %>
<% end %>

<h3>Total Orders on DealBaked: </h3>
<h5> <%= @total_orders %> </h5>
<h3> Total sales: </h3>
<h5>$<%= @total_sales %>.00 </h5>
</br>

<h3>Orders past 24 hours: </h3>
<h5> <%= @orders_24_hours %> </h5>
<h3> Sales past 24 hours: </h3>
<h5>$<%= @sales_24_hours %>.00 </h5>
</br>

<h3>Orders past 7 days: </h3>
<h5> <%= @orders_7_days %> </h5>
<h3> Sales past 7 days: </h3>
<h5>$<%= @sales_7_days %>.00 </h5>
</br>

<h3> Orders past 30 days: </h3>
<h5> <%= @orders_30_days %> </h5>
<h3> Sales past 30 days: </h3>
<h5> <%= @sales_30_days %>.00 </h5>


</br></br></br>

<div class="user-form">

<% if @affiliates.length === 0 %>
  <h6>Cannot create any products until affiliates have signed-up for DealBaked!</h6>
<% else %>
  <%= form_for @product do |f| %>
    <%= f.text_field :title, :placeholder => "Product Title", :required => true %>
    <%= f.text_field :description, :placeholder => "Product Description", :required => true %>
    <%= f.select :category, :required => true do %>
      <% ['Apparel', 'Essentials', 'Accessories', 'Art/Culture', 'Tech', 'Gadgets'].each do |a| %>
        <%= content_tag(:option, a, value: a,) %>
      <% end %>
    <% end %>
    <%= f.number_field :price, :placeholder => "Product Price", :required => true %>
    <%= f.text_field :picture, :placeholder => "Product Picture", :required => true %>
    <%= f.select :user_id, :required => true do %>
      <% @affiliates.each do |a| %>
        <%= content_tag(:option, a.email, value: a.id,) %>
      <% end %>
    <% end %>
    <%= f.number_field :status, :placeholder => "Product Status", :required => true %>
    <%= f.hidden_field :total_sales, :value => 0 %>
    <%= f.text_field :feature_one, :placeholder => "Feature One" %>
    <%= f.text_field :feature_two, :placeholder => "Feature Two" %>
    <%= f.text_field :feature_three, :placeholder => "Feature Three" %>
    <%= f.text_field :feature_four, :placeholder => "Feature Four" %>
    <%= f.text_field :feature_five, :placeholder => "Feature Five" %>
    <%= f.submit "Create Product" %>
  <% end %>
<% end %>

</div>

<div class = "user-forms">
  <h3> Create an Affiliate: </h3>
  <%= form_for @user do |f| %>
  <%= f.label :email %>
  <%= f.email_field :email %>
  <%= f.label :password %>
  <%= f.password_field :password %>
  <%= f.hidden_field :status, :value => 1 %>
  <%= f.submit "Create Affiliate" %>
  <% end %>
</div>

<section ng-controller="ProductsController">

<div class = "container">

  <div ng-repeat="product in products | filter:search.$" style="display:inline-block">

    <div class="col 14 m6 s12" style="display:inline-block">
      <div class="card" style="width:400px; height:420px">
        <button ng-click="deleteProduct(product.id)">X</button>
          <a href="products/{{product.id}}/edit">
            <div class="card-image">
              <img src="{{products[$index].picture}}" id = "product-image" class = "responsive-img" alt="" />
              <div class="card-title" id = "card-category-title">
                <div style="font-size: 18px; font-weighy: bold; color:white">
                  {{product.title}}
                </div>
                <div style="font-size:16px">
                  ${{product.price}}.00
                </div>
              </div>
          </div>
        </a>
      </div>
    </div>
  </div>

</section>
