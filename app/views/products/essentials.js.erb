// appendNew = function(){
  $("<%=j render(:partial => 'essential') %>")
  .appendTo($(".infinite-table"));
// }

scrollListener = function(){
  if($(window).scrollTop() + $(window).height() > $(document).height() - 10) {
    // $("<%=j render(:partial => 'essential') %>")
    // .appendTo($(".infinite-table"));
    $('.pagination > a')[0].click()
  }
}

// scrollListener();

infiniteScroll = function(){
  $(window).scroll(function() {
   scrollListener()
  })
}

// infiniteScroll()

// Update pagination link
<% if @essentials.last_page? %>
  alert("Thats it!")
  $('.pagination').remove();
  $(window).scroll('off');
<% else %>
  $('.pagination')
    .html("<%=j link_to_next_page(@essentials, 'Next Page', :remote => true) %>");
<% end %>
